<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penawaran eHose Fiber - PT. Glori Mitra Sukses</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Destructuring Hooks dari React global
        const { useState, useMemo, useEffect } = React;

        // Alias untuk Icon Lucide supaya sinkron dengan kode kamu
        const { 
            Search, MapPin, MessageCircle, Mail, FileText, Building2, CheckCircle2,
            Users, Filter, ChevronRight, Upload, X, Phone, Download, List, Settings, 
            Plus, Trash2, Database, LayoutDashboard, Briefcase, Info, Check, AlertCircle,
            MinusCircle 
        } = lucide;

        const App = () => {
            // --- KODE ASLI KAMU MULAI DARI SINI ---
            const [activeTab, setActiveTab] = useState('dashboard');
            const [data, setData] = useState([]); 
            const [loading, setLoading] = useState(false);
            const [searchTerm, setSearchTerm] = useState('');
            const [selectedCity, setSelectedCity] = useState('Semua Kota');
            const [selectedLead, setSelectedLead] = useState(null);
            const [isModalOpen, setIsModalOpen] = useState(false);
            const [libsReady, setLibsReady] = useState(false);
            
            const salesName = 'Kherisno';
            const salesEmail = 'sales@glori.id';
            const salesPhone = '081314271921';
            const companyName = 'PT.Glori Mitra Sukses';

            const [masterPrices, setMasterPrices] = useState([
                { id: 1, category: "ADSS", name: "FIBER OPTIC CABLE ADSS 288 CORE (24 TUBE) 4 KM", isp: 180000000, msrp: 199800000 },
                { id: 2, category: "ADSS", name: "FIBER OPTIC CABLE ADSS 144 CORE (12 TUBE) 4 KM", isp: 90000000, msrp: 99900000 },
                { id: 3, category: "Drop Core", name: "FTTH DROP CABLE 1 CORE 3 MESSENGER 1 KM", isp: 650000, msrp: 750000 },
                { id: 4, category: "ODP/ODF", name: "OPTIC DISTRIBUTION POINT 16 CORES Grey ABS", isp: 399000, msrp: 442890 }
            ]);

            const [quoteItems, setQuoteItems] = useState([]);
            const [quoteConfig, setQuoteConfig] = useState({
                selectedCategories: ['ADSS'], 
                priceGroup: 'ISP', 
                discountPercent: 0
            });

            const categories = ["Drop Core", "Jelly Tube", "Fig8 Armor", "Armored", "Mini Fig 8", "Mini ADSS", "ADSS", "ODP/ODF", "Lainnya"];

            useEffect(() => {
                const loadScript = (id, src, callback) => {
                    if (!document.getElementById(id)) {
                        const script = document.createElement('script');
                        script.id = id; script.src = src; script.async = true;
                        script.onload = callback;
                        document.body.appendChild(script);
                    } else if (callback) { callback(); }
                };

                loadScript('jspdf-main', "https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js", () => {
                    loadScript('jspdf-table', "https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js", () => {
                        setLibsReady(true);
                    });
                });
            }, []);

            const cities = useMemo(() => ['Semua Kota', ...Array.from(new Set(data.map(d => d.city))).sort()], [data]);
            
            const filteredLeads = useMemo(() => data.filter(item => {
                const matchSearch = item.company.toLowerCase().includes(searchTerm.toLowerCase());
                const matchCity = selectedCity === 'Semua Kota' || item.city === selectedCity;
                return matchSearch && matchCity;
            }), [data, searchTerm, selectedCity]);

            useEffect(() => {
                if (isModalOpen && selectedLead) {
                    const filtered = masterPrices
                        .filter(p => quoteConfig.selectedCategories.includes(p.category))
                        .map(p => ({
                            ...p,
                            qty: 1,
                            priceIncludingTax: quoteConfig.priceGroup === 'MSRP' ? p.msrp : (quoteConfig.priceGroup === 'Special' ? p.isp * (1 - quoteConfig.discountPercent/100) : p.isp)
                        }));
                    setQuoteItems(filtered);
                }
            }, [quoteConfig.selectedCategories, quoteConfig.priceGroup, quoteConfig.discountPercent, isModalOpen, masterPrices, selectedLead]);

            const parseCSV = (text) => {
                const lines = text.split(/\r?\n/).filter(line => line.trim() !== "");
                const delimiter = text.includes(";") ? ";" : ",";
                return lines.map(line => {
                    const regex = new RegExp(`${delimiter}(?=(?:(?:[^"]*"){2})*[^"]*$)`);
                    return line.split(regex).map(col => col.replace(/^"|"$/g, '').trim());
                });
            };

            const handleLeadsUpload = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                setLoading(true);
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const rows = parseCSV(event.target.result);
                        const parsed = rows.slice(1).map((cols, index) => {
                            if (cols.length < 10) return null;
                            return {
                                id: index,
                                company: cols[0] || 'N/A',
                                brand: cols[2] || '-',
                                address: cols[6] || '',
                                city: cols[9] || 'Luar Kota',
                                phone: cols[12] || '',
                            };
                        }).filter(item => item !== null);
                        setData(parsed);
                    } catch (err) { alert("Format CSV tidak valid."); }
                    finally { setLoading(false); }
                };
                reader.readAsText(file);
            };

            const handlePriceUpload = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const rows = parseCSV(event.target.result);
                        const parsed = rows.slice(1).map((cols, index) => {
                            if (cols.length < 2) return null;
                            const name = cols[0];
                            const isp = parseFloat(cols[1]?.replace(/[^\d.-]/g, '')) || 0;
                            const msrp = parseFloat(cols[2]?.replace(/[^\d.-]/g, '')) || isp * 1.1;
                            const ln = name.toLowerCase();
                            let category = "Lainnya";
                            if (ln.includes("drop core") || ln.includes("ftth drop")) category = "Drop Core";
                            else if (ln.includes("mini adss")) category = "Mini ADSS";
                            else if (ln.includes("adss")) category = "ADSS";
                            else if (ln.includes("gyxtw")) category = "Armored";
                            else if (ln.includes("odp") || ln.includes("odf")) category = "ODP/ODF";
                            return { id: Date.now() + index, category, name, isp, msrp };
                        }).filter(item => item !== null);
                        setMasterPrices(parsed);
                        alert(`Daftar harga diperbarui (${parsed.length} produk).`);
                    } catch (err) { alert("Gagal memuat list harga."); }
                };
                reader.readAsText(file);
            };

            const formatIDR = (val) => new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', maximumFractionDigits: 0 }).format(val);

            const breakdown = useMemo(() => {
                const totalWithTax = quoteItems.reduce((acc, item) => acc + (item.priceIncludingTax * item.qty), 0);
                const subtotalBase = totalWithTax / 1.11;
                const ppnValue = totalWithTax - subtotalBase;
                return { subtotalBase, ppnValue, totalWithTax };
            }, [quoteItems]);

            const getRawWAMessage = (lead) => {
                const itemsStr = quoteItems.slice(0, 8).map(p => `â€¢ ${p.name} (x${p.qty}): *${formatIDR(p.priceIncludingTax * p.qty)}*`).join('\n');
                return `Selamat pagi Pak/Bu ðŸ™\n\nPerkenalkan saya *${salesName} â€“ eHose Fiber Cable*.\nBerikut ringkasan penawaran untuk *${lead.company}*:\n\n${itemsStr}\n\n*Total Akhir (Inc. PPN 11%): ${formatIDR(breakdown.totalWithTax)}*\n\nTerima kasih.\n\n---\n*Kherisno*\nEmail: ${salesEmail}\nWhatsApp: ${salesPhone}`;
            };

            const generatePDF = (lead) => {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    doc.setFillColor(0, 51, 153);
                    doc.rect(15, 12, 16, 16, 'F');
                    doc.setTextColor(255, 255, 255);
                    doc.setFontSize(10);
                    doc.text("GMS", 17.5, 22);
                    doc.setFont("helvetica", "bold");
                    doc.setFontSize(28);
                    doc.setTextColor(0, 51, 153);
                    doc.text("PT.Glori Mitra Sukses", 36, 23);
                    doc.setFontSize(8);
                    doc.setFont("helvetica", "normal");
                    doc.setTextColor(100);
                    const rX = 195;
                    doc.text("(021) 6505001", rX, 15, { align: "right" });
                    doc.text(salesEmail, rX, 19, { align: "right" });
                    doc.text("Komplek Ruko Artha Center I, Jakarta Barat,", rX, 23, { align: "right" });
                    doc.text("DKI Jakarta - 11110", rX, 27, { align: "right" });
                    doc.setLineWidth(1.2); doc.setDrawColor(0, 51, 153); doc.line(15, 34, 195, 34);
                    doc.setLineWidth(0.4); doc.line(15, 35.5, 195, 35.5);
                    doc.setFontSize(14); doc.setTextColor(0); doc.setFont("helvetica", "bold");
                    doc.text("SURAT PENAWARAN HARGA", 105, 50, { align: "center" });
                    doc.setFontSize(9); doc.setFont("helvetica", "normal");
                    doc.text(`Tanggal: ${new Date().toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' })}`, 15, 60);
                    doc.text(`No: QTN/GMS/${new Date().getFullYear()}/${Math.floor(1000 + Math.random() * 9000)}`, 15, 65);
                    doc.setFont("helvetica", "bold");
                    doc.text(`Kepada Yth:`, 15, 75);
                    doc.text(lead.company, 15, 80);
                    doc.setFont("helvetica", "normal");
                    doc.text(`Alamat: ${lead.address || lead.city}`, 15, 85, { maxWidth: 130 });
                    if (lead.phone) doc.text(`Telp: ${lead.phone}`, 15, 93);
                    doc.text("Dengan hormat, bersama ini kami sampaikan penawaran harga eHose Fiber Cable sebagai berikut:", 15, 105);
                    const tableData = quoteItems.map((item, i) => {
                        const basePrice = item.priceIncludingTax / 1.11;
                        return [i + 1, item.name, `${item.qty} Unit`, formatIDR(basePrice), formatIDR(basePrice * item.qty)];
                    });
                    doc.autoTable({
                        startY: 110,
                        head: [['No', 'Deskripsi Produk', 'Qty', 'Harga Satuan', 'Total']],
                        body: tableData,
                        foot: [
                            ['', '', '', 'SUBTOTAL (DPP)', formatIDR(breakdown.subtotalBase)],
                            ['', '', '', 'PPN 11%', formatIDR(breakdown.ppnValue)],
                            ['', '', '', 'GRAND TOTAL', formatIDR(breakdown.totalWithTax)]
                        ],
                        headStyles: { fillColor: [0, 51, 153], fontStyle: 'bold', halign: 'center' },
                        footStyles: { fillColor: [245, 245, 245], textColor: [0, 0, 0], fontStyle: 'bold' },
                        columnStyles: { 0: { halign: 'center' }, 2: { halign: 'center' }, 3: { halign: 'right' }, 4: { halign: 'right' } },
                        theme: 'grid',
                        margin: { left: 15, right: 15 }
                    });
                    const finalY = doc.lastAutoTable.finalY + 15;
                    doc.setFontSize(10);
                    doc.text("Hormat kami,", 150, finalY, { align: "center" });
                    doc.setFont("helvetica", "bold");
                    doc.setTextColor(0, 51, 153);
                    doc.text(salesName, 150, finalY + 25, { align: "center" });
                    doc.setFontSize(8); doc.setFont("helvetica", "normal");
                    doc.text(`Email: ${salesEmail}`, 150, finalY + 29, { align: "center" });
                    doc.text(`WA: ${salesPhone}`, 150, finalY + 33, { align: "center" });
                    doc.setFont("helvetica", "bold");
                    doc.text("PT.Glori Mitra Sukses", 150, finalY + 40, { align: "center" });
                    doc.save(`Penawaran_${lead.company.replace(/\s+/g, '_')}.pdf`);
                } catch (e) { alert("Gagal unduh PDF."); }
            };

            return (
                <div className="min-h-screen bg-slate-50 font-sans text-slate-900 pb-20">
                    <header className="bg-white border-b-4 border-blue-600 sticky top-0 z-30 shadow-lg px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4">
                        <div className="flex items-center gap-4">
                            <div className="bg-blue-600 p-3 rounded-2xl text-white shadow-xl shadow-blue-200"><Building2 size={32} /></div>
                            <div>
                                <h1 className="text-xl font-black text-slate-800 uppercase tracking-tight">{companyName}</h1>
                                <div className="flex gap-2 mt-1">
                                    <button onClick={() => setActiveTab('dashboard')} className={`text-[10px] font-black px-4 py-1.5 rounded-full border transition-all ${activeTab === 'dashboard' ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-slate-400'}`}>DASHBOARD</button>
                                    <button onClick={() => setActiveTab('manage')} className={`text-[10px] font-black px-4 py-1.5 rounded-full border transition-all ${activeTab === 'manage' ? 'bg-blue-600 text-white border-blue-600' : 'bg-white text-slate-400'}`}>KELOLA HARGA</button>
                                </div>
                            </div>
                        </div>
                        <div className="flex items-center gap-3 bg-slate-100 p-2 rounded-2xl border border-slate-200">
                            <div className="text-right px-2"><p className="text-[9px] font-bold text-slate-400 uppercase tracking-widest">Lead Sales</p><p className="text-sm font-black text-blue-700">{salesName}</p></div>
                            <div className="h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center text-white font-bold">K</div>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto p-6">
                        {activeTab === 'manage' ? (
                            <div className="space-y-6">
                                <div className="bg-gradient-to-br from-indigo-700 to-blue-900 p-10 rounded-[3rem] shadow-2xl text-white flex justify-between items-center relative overflow-hidden">
                                    <div className="relative z-10">
                                        <h3 className="text-2xl font-black mb-2">Manajemen List Harga</h3>
                                        <p className="text-blue-100 text-sm mb-6 opacity-80 italic">Format: Nama Barang, Harga ISP (Include PPN), MSRP.</p>
                                        <label className="bg-white text-blue-900 py-4 px-10 rounded-2xl inline-flex items-center gap-2 cursor-pointer text-sm font-black shadow-xl hover:scale-105 transition-transform"><Upload size={20} /> UPLOAD CSV <input type="file" className="hidden" accept=".csv" onChange={handlePriceUpload} /></label>
                                    </div>
                                    <Database size={180} className="absolute -right-10 -bottom-10 opacity-10 rotate-12" />
                                </div>
                                <div className="bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden overflow-x-auto">
                                    <table className="w-full text-left"><thead className="bg-slate-50 border-b border-slate-200"><tr><th className="p-6 text-[10px] font-black text-slate-400 uppercase tracking-widest">Kategori</th><th className="p-6 text-[10px] font-black text-slate-400 uppercase tracking-widest">Nama Produk</th><th className="p-6 text-[10px] font-black text-slate-400 uppercase text-right">Harga (Inc PPN)</th></tr></thead><tbody className="divide-y divide-slate-100">{masterPrices.map(item => (<tr key={item.id} className="hover:bg-blue-50/20 transition-all"><td className="p-6"><span className="bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-[10px] font-black uppercase whitespace-nowrap">{item.category}</span></td><td className="p-6 text-sm font-bold text-slate-700">{item.name}</td><td className="p-6 text-right text-sm font-black text-blue-600">{formatIDR(item.isp)}</td></tr>))}</tbody></table>
                                </div>
                            </div>
                        ) : (
                            <>
                                <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                                    <div className="bg-white p-8 rounded-[2.5rem] border border-slate-200 shadow-sm flex items-center gap-4"><div className="bg-blue-50 p-4 rounded-2xl text-blue-600"><Users size={28}/></div><div><p className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Total Leads</p><h3 className="text-3xl font-black">{data.length}</h3></div></div>
                                    <div className="md:col-span-3 bg-gradient-to-br from-blue-700 to-indigo-900 p-10 rounded-[3rem] shadow-2xl text-white flex justify-between items-center relative overflow-hidden group">
                                        <div className="relative z-10"><h3 className="text-2xl font-black mb-1">Database Leads APJII</h3><p className="text-blue-100 text-sm mb-6 opacity-80 leading-relaxed italic">Upload database pelanggan untuk otomatisasi penawaran harga kabel eHose.</p><label className="bg-white text-blue-900 py-3.5 px-8 rounded-2xl inline-flex items-center gap-2 cursor-pointer text-sm font-black shadow-xl hover:scale-105 transition-transform"><Upload size={18} /> IMPORT DATA APJII <input type="file" className="hidden" accept=".csv" onChange={handleLeadsUpload} /></label></div>
                                        <Briefcase size={200} className="opacity-10 absolute right-10 rotate-12 transition-transform group-hover:rotate-45 duration-700" />
                                    </div>
                                </div>

                                <div className="bg-white p-5 rounded-[2.2rem] border border-slate-200 shadow-sm mb-6 flex gap-4"><div className="relative flex-1"><Search className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400" /><input type="text" placeholder="Cari Nama Perusahaan..." className="w-full pl-12 pr-6 py-3.5 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold outline-none focus:ring-4 focus:ring-blue-500/10 transition-all" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} /></div><select className="bg-slate-50 border border-slate-200 rounded-2xl px-6 py-3.5 text-sm font-bold outline-none cursor-pointer" value={selectedCity} onChange={(e) => setSelectedCity(e.target.value)}>{cities.map(c => <option key={c} value={c}>{c}</option>)}</select></div>
                                <div className="bg-white rounded-[2.5rem] border border-slate-200 shadow-sm overflow-hidden overflow-x-auto"><table className="w-full text-left"><thead className="bg-slate-50/80"><tr><th className="px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest">Company Name</th><th className="px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest">Regional / City</th><th className="px-8 py-5 text-[10px] font-black text-slate-400 uppercase tracking-widest text-right">Tool</th></tr></thead><tbody className="divide-y divide-slate-100">{filteredLeads.map(lead => (<tr key={lead.id} className="hover:bg-blue-50/40 transition-all group"><td className="px-8 py-6 font-extrabold text-slate-800 text-base">{lead.company}</td><td className="px-8 py-6 text-[11px] font-bold text-slate-600"><MapPin size={12} className="inline mr-1 text-blue-500" /> {lead.city}</td><td className="px-8 py-6 text-right"><button onClick={() => { setSelectedLead(lead); setIsModalOpen(true); }} className="bg-slate-900 text-white py-3 px-8 rounded-2xl text-[10px] font-black uppercase tracking-widest hover:bg-blue-600 transition-all shadow-lg hover:shadow-blue-500/30">PENAWARAN</button></td></tr>))}</tbody></table></div>
                            </>
                        )}
                    </main>

                    {isModalOpen && selectedLead && (
                        <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
                            <div className="absolute inset-0 bg-slate-900/80 backdrop-blur-md" onClick={() => setIsModalOpen(false)}></div>
                            <div className="relative bg-white w-full max-w-7xl rounded-[3rem] shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-300 max-h-[95vh] flex flex-col">
                                <div className="bg-gradient-to-r from-blue-700 to-indigo-800 p-8 text-white shrink-0 flex justify-between items-start">
                                    <div><h2 className="text-3xl font-black tracking-tight leading-tight">{selectedLead.company}</h2><p className="text-blue-200 text-xs font-bold uppercase tracking-widest flex items-center gap-2"><MapPin size={14}/> {selectedLead.city}</p></div>
                                    <button onClick={() => setIsModalOpen(false)} className="bg-white/10 hover:bg-white/20 p-3 rounded-2xl transition-all"><X size={24} /></button>
                                </div>
                                <div className="p-8 grid grid-cols-1 lg:grid-cols-12 gap-8 overflow-y-auto">
                                    <div className="lg:col-span-5 space-y-8">
                                        <div><h4 className="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-4">Pilih Kategori Produk</h4><div className="grid grid-cols-2 sm:grid-cols-3 gap-2">{categories.map(cat => (<button key={cat} onClick={() => { const exists = quoteConfig.selectedCategories.includes(cat); const next = exists ? (quoteConfig.selectedCategories.length > 1 ? quoteConfig.selectedCategories.filter(c => c !== cat) : quoteConfig.selectedCategories) : [...quoteConfig.selectedCategories, cat]; setQuoteConfig({...quoteConfig, selectedCategories: next}); }} className={`py-3.5 px-1 rounded-xl text-[9px] font-black transition-all border-2 ${quoteConfig.selectedCategories.includes(cat) ? 'bg-blue-600 text-white border-blue-600 shadow-xl' : 'bg-white text-slate-400 border-slate-100 hover:border-blue-100'}`}>{quoteConfig.selectedCategories.includes(cat) && <Check size={10} className="inline mr-1"/>}{cat}</button>))}</div></div>
                                        <div className="flex flex-col gap-6 bg-slate-50 p-8 rounded-[2.5rem] border border-slate-200"><h4 className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Grup Harga</h4><div className="grid grid-cols-3 gap-2">{['ISP', 'MSRP', 'Special'].map(group => (<button key={group} onClick={() => setQuoteConfig({...quoteConfig, priceGroup: group})} className={`py-4 rounded-2xl text-[10px] font-black transition-all shadow-sm ${quoteConfig.priceGroup === group ? 'bg-blue-600 text-white shadow-blue-500/20' : 'bg-white text-slate-400 border border-slate-100'}`}>{group}</button>))}</div></div>
                                        <div className="grid grid-cols-2 gap-4"><button onClick={() => window.open(`https://wa.me/${selectedLead.phone?.replace(/\D/g, '')}?text=${encodeURIComponent(getRawWAMessage(selectedLead))}`, '_blank')} className="bg-emerald-600 text-white py-4 rounded-[2.2rem] font-black text-xs uppercase tracking-widest hover:bg-emerald-700 transition-all flex items-center justify-center gap-2 shadow-2xl active:scale-95"><MessageCircle size={18}/> WhatsApp</button><button onClick={() => generatePDF(selectedLead)} disabled={!libsReady} className={`py-4 rounded-[2.2rem] font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 shadow-2xl active:scale-95 ${libsReady ? 'bg-blue-600 text-white hover:bg-blue-700 shadow-blue-600/20' : 'bg-slate-300 text-slate-500'}`}><Download size={18}/> {libsReady ? 'Unduh PDF' : 'Memuat...'}</button></div>
                                    </div>
                                    <div className="lg:col-span-7 space-y-6">
                                        <h4 className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Daftar Produk Terpilih</h4>
                                        <div className="bg-white rounded-[2.5rem] border-2 border-slate-100 overflow-hidden shadow-inner max-h-[350px] overflow-y-auto divide-y divide-slate-100">
                                            {quoteItems.length > 0 ? quoteItems.map((item) => (
                                                <div key={item.id} className="p-5 hover:bg-slate-50 transition-colors group flex items-center justify-between">
                                                    <div className="flex-1 pr-4"><p className="text-[11px] font-bold text-slate-700 leading-tight">{item.name}</p><p className="text-[8px] font-black text-blue-400 uppercase mt-1">@ {formatIDR(item.priceIncludingTax)}</p></div>
                                                    <div className="flex items-center gap-3">
                                                         <div className="flex items-center bg-slate-100 rounded-xl p-1 shadow-inner border border-slate-200">
                                                            <button onClick={() => setQuoteItems(prev => prev.map(i => i.id === item.id ? {...i, qty: Math.max(1, i.qty - 1)} : i))} className="p-1 text-slate-400 hover:text-blue-600"><MinusCircle size={16}/></button>
                                                            <span className="text-xs font-black px-2 w-8 text-center">{item.qty}</span>
                                                            <button onClick={() => setQuoteItems(prev => prev.map(i => i.id === item.id ? {...i, qty: i.qty + 1} : i))} className="p-1 text-slate-400 hover:text-blue-600"><Plus size={16}/></button>
                                                         </div>
                                                         <button onClick={() => setQuoteItems(prev => prev.filter(i => i.id !== item.id))} className="text-red-300 hover:text-red-600 p-2 transition-colors"><Trash2 size={18}/></button>
                                                    </div>
                                                </div>
                                            )) : (
                                                <div className="p-20 text-center flex flex-col items-center gap-3 opacity-20"><AlertCircle size={48}/><p className="text-xs font-black uppercase tracking-widest">Silakan Pilih Kategori</p></div>
                                            )}
                                        </div>
                                        <div className="bg-slate-50 p-8 rounded-[3rem] border-2 border-dashed border-slate-200 grid grid-cols-2 gap-4 shadow-sm">
                                            <div className="space-y-1"><p className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Rincian Faktur</p><div className="text-xs font-bold text-slate-600">Subtotal (DPP): {formatIDR(breakdown.subtotalBase)}</div><div className="text-xs font-bold text-blue-600">PPN (11%): {formatIDR(breakdown.ppnValue)}</div></div>
                                            <div className="flex flex-col justify-center items-end border-l-2 border-slate-200 pl-4"><p className="text-[10px] font-black text-slate-400 uppercase tracking-widest">Grand Total</p><div className="text-2xl font-black text-slate-900">{formatIDR(breakdown.totalWithTax)}</div></div>
                                        </div>
                                    </div>
                                </div>
                                <div className="p-6 bg-slate-50 text-center border-t border-slate-100 shrink-0"><p className="text-[9px] font-black text-slate-400 tracking-[0.5em] uppercase italic">{companyName} â€” Official Dealer 2026</p></div>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
